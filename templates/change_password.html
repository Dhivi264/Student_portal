{% extends "index.html" %}

{% block title %}Change Password{% endblock %}
{% block body_class %}{% if current_user.role == 'admin' %}admin-bg{% else %}student-bg{% endif %}{% endblock %}

{% block sidebar_toggle %}
<button class="sidebar-toggle" onclick="document.querySelector('.sidebar').classList.toggle('open')">
  ☰ Menu
</button>
{% endblock %}

{% block sidebar %}
<div class="sidebar">
  {% if current_user.role == 'admin' %}
    <a href="{{ url_for('admin_dashboard') }}">🏠 Dashboard</a>
    <a href="{{ url_for('add_student') }}">➕ Add Student</a>
    <a href="{{ url_for('admin_search') }}">🔍 Search</a>
    <a href="{{ url_for('change_password_self') }}" class="active">🔑 Change Password</a>
    <a class="btn-danger" href="{{ url_for('logout') }}">🚪 Logout</a>
  {% else %}
    <a href="{{ url_for('student_dashboard') }}">👤 My Profile</a>
    <a href="{{ url_for('change_password_self') }}" class="active">🔑 Change Password</a>
    <a class="btn-danger" href="{{ url_for('logout') }}">🚪 Logout</a>
  {% endif %}
</div>
{% endblock %}

{% block content %}
<div class="container">
  <h2>Change Password</h2>
  <form method="post">
    <input name="old_password" type="password" placeholder="Old password" required>
    <input name="new_password" type="password" placeholder="New password" required>
    <input name="confirm_password" type="password" placeholder="Confirm new password" required>
    <button type="submit">Update</button>
  </form>

  <div style="margin-top:10px;">
    <a class="btn-box" 
       href="{{ url_for('admin_dashboard') if current_user.role == 'admin' else url_for('student_dashboard') }}">
       ⬅ Back
    </a>
  </div>
</div>
{% endblock %}
