{% extends "index.html" %}

{% block title %}Student Dashboard{% endblock %}
{% block body_class %}student-bg{% endblock %}

{% block sidebar_toggle %}
<button class="sidebar-toggle" onclick="document.querySelector('.sidebar').classList.toggle('open')">
  â˜° Menu
</button>
{% endblock %}

{% block sidebar %}
<div class="sidebar">
  <a href="{{ url_for('student_dashboard') }}" class="active">ðŸ‘¤ My Profile</a>
  <a href="{{ url_for('change_password_self') }}">ðŸ”‘ Change Password</a>
  <a class="btn-danger" href="{{ url_for('logout') }}">ðŸšª Logout</a>
</div>
{% endblock %}

{% block content %}
<div class="container">
  <h2>My Profile</h2>

  {% if student %}
    <div class="student-card">
      {% if student.image_filename %}
        <img src="{{ url_for('uploaded_file', filename=student.image_filename) }}" alt="Profile">
      {% else %}
        <img src="{{ url_for('static', filename='default-avatar.png') }}" alt="Profile">
      {% endif %}

      <div>
        <div><b>{{ student.name }}</b></div>
        <div>Username: {{ student.student_username }}</div>
        <div>Phone: {{ student.phone or '-' }}</div>
        <div>Email: {{ student.email or '-' }}</div>
        <div>CGPA: {{ student.cgpa or '-' }}</div>
        <div>Attendance: {{ student.attendance or 0 }}%</div>
        <div>Address: {{ student.address or '-' }}</div>
        <div>
          Scholarship:
          {% if student.is_scholarship %}
            {{ student.scholarship_name or 'Yes' }}
          {% else %}
            No
          {% endif %}
        </div>
      </div>
    </div>
  {% else %}
    <p>No profile found. Contact admin.</p>
  {% endif %}
</div>
{% endblock %}
